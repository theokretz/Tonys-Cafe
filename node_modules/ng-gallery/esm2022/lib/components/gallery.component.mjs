import { Component, Input, Output, ContentChild, EventEmitter, ChangeDetectionStrategy } from '@angular/core';
import { CommonModule } from '@angular/common';
import { Subscription } from 'rxjs';
import { GalleryCoreComponent } from './gallery-core.component';
import { GalleryImageDef } from '../directives/gallery-image-def.directive';
import { GalleryThumbDef } from '../directives/gallery-thumb-def.directive';
import { GalleryItemDef } from '../directives/gallery-item-def.directive';
import { GalleryBoxDef } from '../directives/gallery-box-def.directive';
import * as i0 from "@angular/core";
import * as i1 from "../services/gallery.service";
import * as i2 from "@angular/common";
class GalleryComponent {
    constructor(_gallery) {
        this._gallery = _gallery;
        this.nav = this._gallery.config.nav;
        this.dots = this._gallery.config.dots;
        this.loop = this._gallery.config.loop;
        this.debug = this._gallery.config.debug;
        this.thumb = this._gallery.config.thumb;
        this.counter = this._gallery.config.counter;
        this.dotsSize = this._gallery.config.dotsSize;
        this.autoPlay = this._gallery.config.autoPlay;
        this.thumbWidth = this._gallery.config.thumbWidth;
        this.thumbHeight = this._gallery.config.thumbHeight;
        this.disableThumb = this._gallery.config.disableThumb;
        this.scrollBehavior = this._gallery.config.scrollBehavior;
        this.navScrollBehavior = this._gallery.config.navScrollBehavior;
        this.slidingDisabled = this._gallery.config.slidingDisabled;
        this.thumbSlidingDisabled = this._gallery.config.thumbSlidingDisabled;
        this.mouseSlidingDisabled = this._gallery.config.mouseSlidingDisabled;
        this.thumbMouseSlidingDisabled = this._gallery.config.thumbMouseSlidingDisabled;
        this.playerInterval = this._gallery.config.playerInterval;
        this.slidingDuration = this._gallery.config.slidingDuration;
        this.slidingEase = this._gallery.config.slidingEase;
        this.resizeDebounceTime = this._gallery.config.resizeDebounceTime;
        this.imageSize = this._gallery.config.imageSize;
        this.thumbImageSize = this._gallery.config.thumbImageSize;
        this.dotsPosition = this._gallery.config.dotsPosition;
        this.counterPosition = this._gallery.config.counterPosition;
        this.slidingDirection = this._gallery.config.slidingDirection;
        this.loadingAttr = this._gallery.config.loadingAttr;
        this.loadingStrategy = this._gallery.config.loadingStrategy;
        this.thumbPosition = this._gallery.config.thumbPosition;
        this.thumbView = this._gallery.config.thumbView;
        this.thumbDetached = this._gallery.config.thumbDetached;
        this.thumbAutosize = this._gallery.config.thumbAutosize;
        this.itemAutosize = this._gallery.config.itemAutosize;
        this.autoHeight = this._gallery.config.autoHeight;
        // Inputs used by the lightbox
        /** Destroy gallery ref on component destroy event */
        this.destroyRef = true;
        /** Skip initializing the config with components inputs (Lightbox mode) */
        this.skipInitConfig = false;
        this.itemClick = new EventEmitter();
        this.thumbClick = new EventEmitter();
        this.playingChange = new EventEmitter();
        this.indexChange = new EventEmitter();
        this.itemsChange = new EventEmitter();
        this.error = new EventEmitter();
        this._itemClick$ = Subscription.EMPTY;
        this._thumbClick$ = Subscription.EMPTY;
        this._itemChange$ = Subscription.EMPTY;
        this._indexChange$ = Subscription.EMPTY;
        this._playingChange$ = Subscription.EMPTY;
        this._playerListener$ = Subscription.EMPTY;
    }
    getConfig() {
        return {
            nav: this.nav,
            dots: this.dots,
            loop: this.loop,
            debug: this.debug,
            thumb: this.thumb,
            counter: this.counter,
            autoPlay: this.autoPlay,
            dotsSize: this.dotsSize,
            imageSize: this.imageSize,
            thumbImageSize: this.thumbImageSize,
            scrollBehavior: this.scrollBehavior,
            navScrollBehavior: this.navScrollBehavior,
            thumbView: this.thumbView,
            thumbWidth: this.thumbWidth,
            thumbHeight: this.thumbHeight,
            slidingEase: this.slidingEase,
            disableThumb: this.disableThumb,
            dotsPosition: this.dotsPosition,
            loadingAttr: this.loadingAttr,
            thumbDetached: this.thumbDetached,
            thumbPosition: this.thumbPosition,
            playerInterval: this.playerInterval,
            counterPosition: this.counterPosition,
            loadingStrategy: this.loadingStrategy,
            slidingDuration: this.slidingDuration,
            slidingDirection: this.slidingDirection,
            resizeDebounceTime: this.resizeDebounceTime,
            slidingDisabled: this.slidingDisabled,
            thumbSlidingDisabled: this.thumbSlidingDisabled,
            mouseSlidingDisabled: this.mouseSlidingDisabled,
            thumbMouseSlidingDisabled: this.thumbMouseSlidingDisabled,
            thumbAutosize: this.thumbAutosize,
            itemAutosize: this.itemAutosize,
            autoHeight: this.autoHeight,
        };
    }
    ngOnChanges(changes) {
        if (this.galleryRef) {
            this.galleryRef.setConfig(this.getConfig());
            if (changes.items && changes.items.currentValue !== changes.items.previousValue) {
                this.load(this.items);
            }
        }
    }
    ngOnInit() {
        // Get gallery instance by id
        if (this.skipInitConfig) {
            this.galleryRef = this._gallery.ref(this.id);
        }
        else {
            this.galleryRef = this._gallery.ref(this.id, this.getConfig());
        }
        // Load gallery items
        this.load(this.items);
        // Activate player listener
        this._playerListener$ = this.galleryRef.activatePlayer().subscribe();
        // Subscribes to events on demand
        if (this.indexChange.observed) {
            this._indexChange$ = this.galleryRef.indexChanged.subscribe((state) => this.indexChange.emit(state));
        }
        if (this.itemsChange.observed) {
            this._itemChange$ = this.galleryRef.itemsChanged.subscribe((state) => this.itemsChange.emit(state));
        }
        if (this.playingChange.observed) {
            this._playingChange$ = this.galleryRef.playingChanged.subscribe((state) => this.playingChange.emit(state));
        }
        // Start playing if autoplay is set to true
        if (this.autoPlay) {
            this.play();
        }
    }
    ngAfterContentInit() {
        const templateConfig = {};
        if (this.galleryItemDef) {
            templateConfig.itemTemplate = this.galleryItemDef.templateRef;
        }
        if (this.galleryImageDef) {
            templateConfig.imageTemplate = this.galleryImageDef.templateRef;
        }
        if (this.galleryThumbDef) {
            templateConfig.thumbTemplate = this.galleryThumbDef.templateRef;
        }
        if (this.galleryBoxDef) {
            templateConfig.boxTemplate = this.galleryBoxDef.templateRef;
        }
        if (Object.keys(templateConfig).length) {
            this.galleryRef.setConfig(templateConfig);
        }
    }
    ngOnDestroy() {
        this._itemClick$.unsubscribe();
        this._thumbClick$.unsubscribe();
        this._itemChange$.unsubscribe();
        this._indexChange$.unsubscribe();
        this._playingChange$.unsubscribe();
        this._playerListener$.unsubscribe();
        if (this.destroyRef) {
            this.galleryRef.destroy();
        }
    }
    onItemClick(i) {
        this.itemClick.emit(i);
        this.galleryRef.itemClick.next(i);
    }
    onThumbClick(i) {
        this.galleryRef.set(i);
        this.thumbClick.emit(i);
        this.galleryRef.thumbClick.next(i);
    }
    onError(err) {
        this.error.emit(err);
        this.galleryRef.error.next(err);
    }
    load(items) {
        this.galleryRef.load(items);
    }
    add(item, active) {
        this.galleryRef.add(item, active);
    }
    addImage(data, active) {
        this.galleryRef.addImage(data, active);
    }
    addVideo(data, active) {
        this.galleryRef.addVideo(data, active);
    }
    addIframe(data, active) {
        this.galleryRef.addIframe(data, active);
    }
    addYoutube(data, active) {
        this.galleryRef.addYoutube(data, active);
    }
    remove(i) {
        this.galleryRef.remove(i);
    }
    next(behavior, loop) {
        this.galleryRef.next(behavior, loop);
    }
    prev(behavior, loop) {
        this.galleryRef.prev(behavior, loop);
    }
    set(i, behavior) {
        this.galleryRef.set(i, behavior);
    }
    reset() {
        this.galleryRef.reset();
    }
    play(interval) {
        this.galleryRef.play(interval);
    }
    stop() {
        this.galleryRef.stop();
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.1.1", ngImport: i0, type: GalleryComponent, deps: [{ token: i1.Gallery }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.1.1", type: GalleryComponent, isStandalone: true, selector: "gallery", inputs: { id: "id", items: "items", nav: "nav", dots: "dots", loop: "loop", debug: "debug", thumb: "thumb", counter: "counter", dotsSize: "dotsSize", autoPlay: "autoPlay", thumbWidth: "thumbWidth", thumbHeight: "thumbHeight", disableThumb: "disableThumb", scrollBehavior: "scrollBehavior", navScrollBehavior: "navScrollBehavior", slidingDisabled: "slidingDisabled", thumbSlidingDisabled: "thumbSlidingDisabled", mouseSlidingDisabled: "mouseSlidingDisabled", thumbMouseSlidingDisabled: "thumbMouseSlidingDisabled", playerInterval: "playerInterval", slidingDuration: "slidingDuration", slidingEase: "slidingEase", resizeDebounceTime: "resizeDebounceTime", imageSize: "imageSize", thumbImageSize: "thumbImageSize", dotsPosition: "dotsPosition", counterPosition: "counterPosition", slidingDirection: "slidingDirection", loadingAttr: "loadingAttr", loadingStrategy: "loadingStrategy", thumbPosition: "thumbPosition", thumbView: "thumbView", thumbDetached: "thumbDetached", thumbAutosize: "thumbAutosize", itemAutosize: "itemAutosize", autoHeight: "autoHeight", destroyRef: "destroyRef", skipInitConfig: "skipInitConfig" }, outputs: { itemClick: "itemClick", thumbClick: "thumbClick", playingChange: "playingChange", indexChange: "indexChange", itemsChange: "itemsChange", error: "error" }, queries: [{ propertyName: "galleryItemDef", first: true, predicate: GalleryItemDef, descendants: true }, { propertyName: "galleryImageDef", first: true, predicate: GalleryImageDef, descendants: true }, { propertyName: "galleryThumbDef", first: true, predicate: GalleryThumbDef, descendants: true }, { propertyName: "galleryBoxDef", first: true, predicate: GalleryBoxDef, descendants: true }], usesOnChanges: true, ngImport: i0, template: `
    <gallery-core [galleryId]="id"
                  [state]="galleryRef.state | async"
                  [config]="galleryRef.config | async"
                  (itemClick)="onItemClick($event)"
                  (thumbClick)="onThumbClick($event)"
                  (error)="onError($event)"></gallery-core>
  `, isInline: true, styles: ["::ng-deep gallery-core[dotsPosition=top] gallery-dots{top:15px}::ng-deep gallery-core[dotsPosition=bottom] gallery-dots{bottom:15px}::ng-deep gallery-dots{position:absolute;left:50%;z-index:99;transform:translate(-50%);display:flex;gap:6px}::ng-deep .g-dot{cursor:pointer;z-index:20}::ng-deep .g-dot:hover .g-dot-inner{opacity:1}::ng-deep .g-dot-active .g-dot-inner{opacity:1}::ng-deep .g-dot-inner{background-color:var(--g-overlay-color);opacity:.4;width:100%;height:100%;border-radius:50%;transition:opacity linear .15s}::ng-deep gallery-dots,::ng-deep .g-dot,::ng-deep .g-dot-inner{display:flex;justify-content:center;align-items:center}::ng-deep .g-nav-next,::ng-deep .g-nav-prev{position:absolute;top:50%;display:flex;padding:16px 8px;cursor:pointer;z-index:999;opacity:.6;transition:opacity linear .15s,right linear .15s,left linear .15s}::ng-deep .g-nav-next:hover,::ng-deep .g-nav-prev:hover{opacity:1}::ng-deep .g-nav-next svg,::ng-deep .g-nav-prev svg{filter:var(--g-nav-drop-shadow);width:28px;height:28px;fill:#fff}::ng-deep .g-nav-next{right:.5em;transform:translateY(-50%) perspective(1px)}::ng-deep .g-nav-next:hover{right:.4em}::ng-deep .g-nav-prev{left:.5em;transform:translateY(-50%) perspective(1px) scale(-1)}::ng-deep .g-nav-prev:hover{left:.4em}@media only screen and (max-width: 480px){::ng-deep .g-nav-next{right:.2em}::ng-deep .g-nav-prev{left:.2em}}::ng-deep gallery-slider{position:relative;display:flex;align-items:center;justify-content:center}::ng-deep gallery-slider .g-slider[centralised=true]:before,::ng-deep gallery-slider .g-slider[centralised=true]:after{content:\"\"}::ng-deep gallery-slider .g-slider[centralised=true]:before{flex:0 0 var(--slider-centralize-start-size)}::ng-deep gallery-slider .g-slider[centralised=true]:after{flex:0 0 var(--slider-centralize-end-size)}::ng-deep .g-slider-content{flex:0 0 auto;display:flex;align-items:center;gap:1px}::ng-deep gallery-core[slidingDirection=horizontal] gallery-slider .g-slider{overflow-x:auto;overflow-y:hidden;scroll-snap-type:x mandatory;flex-direction:row}::ng-deep gallery-core[slidingDirection=horizontal] gallery-slider .g-slider-content{flex-direction:row;height:100%}::ng-deep gallery-core[slidingDirection=vertical] gallery-slider .g-slider{overflow-x:hidden;overflow-y:auto;scroll-snap-type:y mandatory;flex-direction:column}::ng-deep gallery-core[slidingDirection=vertical] gallery-slider .g-slider-content{flex-direction:column;width:100%}::ng-deep gallery-core[slidingDisabled=true] .g-slider{overflow:hidden!important}::ng-deep .g-slider{display:flex;align-items:center;width:100%;transition:var(--g-height-transition);scrollbar-width:none;-ms-overflow-style:none}::ng-deep .g-slider::-webkit-scrollbar{display:none}::ng-deep .g-slider.g-sliding .g-slider-content,::ng-deep .g-slider.g-scrolling .g-slider-content{pointer-events:none}::ng-deep .g-slider gallery-thumb,::ng-deep .g-slider gallery-item{display:flex;flex-direction:column;flex:0 0 auto;scroll-snap-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-user-drag:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}::ng-deep .g-slider gallery-thumb gallery-image[imageState=success],::ng-deep .g-slider gallery-item gallery-image[imageState=success]{align-self:center}::ng-deep gallery-thumbs{max-height:100%;max-width:100%;display:block;z-index:100}::ng-deep gallery-thumbs .g-slider[centralised=true]:before,::ng-deep gallery-thumbs .g-slider[centralised=true]:after{content:\"\"}::ng-deep gallery-thumbs .g-slider[centralised=true]:before{flex:0 0 var(--thumb-centralize-start-size)}::ng-deep gallery-thumbs .g-slider[centralised=true]:after{flex:0 0 var(--thumb-centralize-end-size)}::ng-deep gallery-thumbs .g-slider gallery-thumb{background:black;height:var(--thumb-height);width:var(--thumb-width);max-height:var(--thumb-height);max-width:var(--thumb-width)}::ng-deep gallery-thumbs .g-slider gallery-thumb gallery-image,::ng-deep gallery-thumbs .g-slider gallery-thumb img{width:100%;height:100%}::ng-deep gallery-core[disableThumb=true] gallery-thumb{cursor:default}::ng-deep gallery-core[thumbPosition=top] gallery-thumbs .g-slider,::ng-deep gallery-core[thumbPosition=bottom] gallery-thumbs .g-slider{top:0;overflow-x:auto;flex-direction:row}::ng-deep gallery-core[thumbPosition=top] gallery-thumbs .g-slider-content,::ng-deep gallery-core[thumbPosition=bottom] gallery-thumbs .g-slider-content{flex-direction:row}::ng-deep gallery-core[thumbPosition=top][thumbAutosize=true] gallery-thumb,::ng-deep gallery-core[thumbPosition=bottom][thumbAutosize=true] gallery-thumb{width:initial;max-width:unset}::ng-deep gallery-core[thumbPosition=left] gallery-thumbs .g-slider,::ng-deep gallery-core[thumbPosition=right] gallery-thumbs .g-slider{left:0;overflow-y:auto;flex-direction:column}::ng-deep gallery-core[thumbPosition=left] gallery-thumbs .g-slider-content,::ng-deep gallery-core[thumbPosition=right] gallery-thumbs .g-slider-content{flex-direction:column}::ng-deep gallery-core[thumbPosition=left][thumbAutosize=true] gallery-thumb,::ng-deep gallery-core[thumbPosition=right][thumbAutosize=true] gallery-thumb{height:initial;max-height:unset}::ng-deep gallery-core[thumbSlidingDisabled=true] gallery-thumbs .g-slider{overflow:hidden!important}::ng-deep gallery-core[thumbPosition=top]{flex-direction:column}::ng-deep gallery-core[thumbPosition=left]{flex-direction:row}::ng-deep gallery-core[thumbPosition=right]{flex-direction:row-reverse}::ng-deep gallery-core[thumbPosition=bottom]{flex-direction:column-reverse}::ng-deep gallery-thumb.g-active-thumb .g-thumb-loading{background-color:#464646}::ng-deep .g-thumb-loading{position:relative;overflow:hidden;width:100%;height:100%;background-color:#262626}::ng-deep .g-thumb-loading:before{content:\"\";position:absolute;inset:0 0 0 50%;z-index:1;width:500%;margin-left:-250%;animation:phAnimation .8s linear infinite;background:linear-gradient(to right,rgba(255,255,255,0) 46%,rgba(255,255,255,.35) 50%,rgba(255,255,255,0) 54%) 50% 50%}@keyframes phAnimation{0%{transform:translate3d(-30%,0,0)}to{transform:translate3d(30%,0,0)}}::ng-deep gallery-core[counterPosition=top] .g-counter{top:0;border-bottom-left-radius:4px;border-bottom-right-radius:4px}::ng-deep gallery-core[counterPosition=bottom] .g-counter{bottom:0;border-top-left-radius:4px;border-top-right-radius:4px}::ng-deep .g-counter{font-weight:700;-webkit-user-select:none;-moz-user-select:none;user-select:none;opacity:.6;transition:opacity linear .15s;z-index:50;position:absolute;left:50%;transform:translate(-50%) perspective(1px);font-size:12px;padding:4px 10px;color:var(--g-font-color);background-color:var(--g-overlay-color);box-shadow:var(--g-box-shadow)}::ng-deep .g-counter:hover{opacity:.8}::ng-deep gallery[gallerize] gallery-item{cursor:pointer}::ng-deep gallery-core{gap:1px}::ng-deep gallery-image img{width:100%!important}::ng-deep .gallery-image-error svg,::ng-deep .gallery-thumb-error svg{width:100%;height:100%}::ng-deep .gallery-thumb-error{width:40px;height:40px}::ng-deep .gallery-image-error{width:100px;height:100px}::ng-deep gallery-item,::ng-deep gallery-thumb{position:relative;display:block;overflow:hidden}::ng-deep gallery-item h2,::ng-deep gallery-item h4,::ng-deep gallery-thumb h2,::ng-deep gallery-thumb h4{color:coral;margin:0}::ng-deep gallery-item h2,::ng-deep gallery-thumb h2{font-size:3.5em;margin-bottom:.3em}::ng-deep gallery-item h4,::ng-deep gallery-thumb h4{font-size:1.6em}::ng-deep gallery-item gallery-image,::ng-deep gallery-thumb gallery-image{transition:opacity .3s cubic-bezier(.5,0,.5,1)}::ng-deep gallery-item{--g-item-width: \"auto\";--g-item-height: 100%;height:var(--g-item-height);width:var(--g-item-width);max-height:var(--g-item-height);max-width:100%;z-index:10}::ng-deep gallery-item gallery-image{width:100%;height:100%}::ng-deep gallery-item.g-active-item gallery-image{opacity:1}::ng-deep gallery-item video,::ng-deep gallery-item iframe{position:absolute;width:100%;height:100%}::ng-deep gallery-thumb{align-self:center;cursor:pointer;max-height:100%}::ng-deep gallery-thumb gallery-image{opacity:.5}::ng-deep gallery-thumb.g-active-thumb gallery-image{opacity:1}::ng-deep gallery-image{min-height:100%;display:flex}::ng-deep .g-image-item{pointer-events:none;max-height:100%;max-width:100%}::ng-deep .g-template,::ng-deep .g-image-error-message{position:absolute;z-index:10;inset:0;color:#fff;display:flex;align-items:center;justify-content:center;flex-direction:column}::ng-deep .g-loading{position:absolute;transform:translate3d(-50%,-50%,0);left:50%;top:50%;width:80px;height:80px}::ng-deep gallery-core[imageSize=contain] gallery-item .g-image-item{-o-object-fit:contain;object-fit:contain}::ng-deep gallery-core[imageSize=cover] gallery-item .g-image-item{-o-object-fit:cover;object-fit:cover}::ng-deep gallery-core[thumbImageSize=cover] gallery-thumb .g-image-item{-o-object-fit:cover;object-fit:cover}::ng-deep gallery{position:relative;z-index:1;overflow:hidden;display:flex;justify-content:center;align-items:center;background-color:#000;--g-height-transition: height .4s linear;--g-nav-drop-shadow: drop-shadow(0 0 2px rgba(0, 0, 0, .6));--g-box-shadow: 0 0 3px rgba(0, 0, 0, .6);--g-font-color: #000;--g-overlay-color: #fff}::ng-deep gallery *{box-sizing:border-box}::ng-deep gallery,::ng-deep gallery-core{position:relative;overflow:hidden}::ng-deep gallery-core{max-height:100%;min-height:100%;height:500px}::ng-deep gallery-core,::ng-deep .g-box,::ng-deep .g-slider{display:flex;width:100%;max-height:100%}::ng-deep .g-box,::ng-deep gallery-slider{overflow:hidden;position:relative;display:flex;flex-direction:column;order:1;flex:1}::ng-deep gallery-core[autoHeight=true][thumbPosition=top],::ng-deep gallery-core[autoHeight=true][thumbPosition=bottom]{height:-moz-fit-content!important;height:fit-content!important}::ng-deep gallery-core[autoHeight=true][thumbPosition=top] .g-slider,::ng-deep gallery-core[autoHeight=true][thumbPosition=bottom] .g-slider{height:100%}::ng-deep gallery-core[autoHeight=true][thumbPosition=top] gallery-slider,::ng-deep gallery-core[autoHeight=true][thumbPosition=top] gallery-core,::ng-deep gallery-core[autoHeight=true][thumbPosition=bottom] gallery-slider,::ng-deep gallery-core[autoHeight=true][thumbPosition=bottom] gallery-core{height:100%}::ng-deep gallery-core[autoHeight=true] gallery-item{min-height:100%}::ng-deep gallery-core[autoHeight=true][slidingDirection=horizontal] gallery-item{height:unset;max-height:unset;min-height:unset}::ng-deep gallery-core[autoHeight=true][slidingDirection=horizontal] gallery-item gallery-image{height:100%;width:auto}::ng-deep gallery-core[autoHeight=true][slidingDirection=vertical] gallery-item{height:unset;max-height:unset;min-height:unset}::ng-deep gallery-core[autoHeight=true][slidingDirection=vertical] gallery-item gallery-image{width:100%;height:auto}::ng-deep gallery-core[autoHeight=false][slidingDirection=horizontal] gallery-item,::ng-deep gallery-core[autoHeight=false][slidingDirection=horizontal] .g-slider{height:100%}::ng-deep gallery-core[itemAutoSize=true][slidingDirection=horizontal] gallery-item gallery-image{height:100%;width:auto}::ng-deep gallery-core[itemAutoSize=true][slidingDirection=vertical] gallery-item{height:auto}::ng-deep gallery-core[itemAutoSize=true][slidingDirection=vertical] gallery-item gallery-image{width:100%;height:auto}::ng-deep gallery-core[debug=true] gallery-slider:after,::ng-deep gallery-core[debug=true] gallery-slider:before{position:absolute;content:\"\";background:lime;box-shadow:0 0 5px #0f0;z-index:99999}::ng-deep gallery-core[debug=true] gallery-slider:before{width:100%;height:1px}::ng-deep gallery-core[debug=true] gallery-slider:after{height:100%;width:1px}::ng-deep gallery-core[debug=true] gallery-slider gallery-item{outline:1px solid darkorange}::ng-deep .g-box-template{position:absolute;z-index:10}\n"], dependencies: [{ kind: "ngmodule", type: CommonModule }, { kind: "pipe", type: i2.AsyncPipe, name: "async" }, { kind: "component", type: GalleryCoreComponent, selector: "gallery-core", inputs: ["galleryId", "state", "config"], outputs: ["itemClick", "thumbClick", "error"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
export { GalleryComponent };
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.1.1", ngImport: i0, type: GalleryComponent, decorators: [{
            type: Component,
            args: [{ selector: 'gallery', changeDetection: ChangeDetectionStrategy.OnPush, template: `
    <gallery-core [galleryId]="id"
                  [state]="galleryRef.state | async"
                  [config]="galleryRef.config | async"
                  (itemClick)="onItemClick($event)"
                  (thumbClick)="onThumbClick($event)"
                  (error)="onError($event)"></gallery-core>
  `, standalone: true, imports: [CommonModule, GalleryCoreComponent], styles: ["::ng-deep gallery-core[dotsPosition=top] gallery-dots{top:15px}::ng-deep gallery-core[dotsPosition=bottom] gallery-dots{bottom:15px}::ng-deep gallery-dots{position:absolute;left:50%;z-index:99;transform:translate(-50%);display:flex;gap:6px}::ng-deep .g-dot{cursor:pointer;z-index:20}::ng-deep .g-dot:hover .g-dot-inner{opacity:1}::ng-deep .g-dot-active .g-dot-inner{opacity:1}::ng-deep .g-dot-inner{background-color:var(--g-overlay-color);opacity:.4;width:100%;height:100%;border-radius:50%;transition:opacity linear .15s}::ng-deep gallery-dots,::ng-deep .g-dot,::ng-deep .g-dot-inner{display:flex;justify-content:center;align-items:center}::ng-deep .g-nav-next,::ng-deep .g-nav-prev{position:absolute;top:50%;display:flex;padding:16px 8px;cursor:pointer;z-index:999;opacity:.6;transition:opacity linear .15s,right linear .15s,left linear .15s}::ng-deep .g-nav-next:hover,::ng-deep .g-nav-prev:hover{opacity:1}::ng-deep .g-nav-next svg,::ng-deep .g-nav-prev svg{filter:var(--g-nav-drop-shadow);width:28px;height:28px;fill:#fff}::ng-deep .g-nav-next{right:.5em;transform:translateY(-50%) perspective(1px)}::ng-deep .g-nav-next:hover{right:.4em}::ng-deep .g-nav-prev{left:.5em;transform:translateY(-50%) perspective(1px) scale(-1)}::ng-deep .g-nav-prev:hover{left:.4em}@media only screen and (max-width: 480px){::ng-deep .g-nav-next{right:.2em}::ng-deep .g-nav-prev{left:.2em}}::ng-deep gallery-slider{position:relative;display:flex;align-items:center;justify-content:center}::ng-deep gallery-slider .g-slider[centralised=true]:before,::ng-deep gallery-slider .g-slider[centralised=true]:after{content:\"\"}::ng-deep gallery-slider .g-slider[centralised=true]:before{flex:0 0 var(--slider-centralize-start-size)}::ng-deep gallery-slider .g-slider[centralised=true]:after{flex:0 0 var(--slider-centralize-end-size)}::ng-deep .g-slider-content{flex:0 0 auto;display:flex;align-items:center;gap:1px}::ng-deep gallery-core[slidingDirection=horizontal] gallery-slider .g-slider{overflow-x:auto;overflow-y:hidden;scroll-snap-type:x mandatory;flex-direction:row}::ng-deep gallery-core[slidingDirection=horizontal] gallery-slider .g-slider-content{flex-direction:row;height:100%}::ng-deep gallery-core[slidingDirection=vertical] gallery-slider .g-slider{overflow-x:hidden;overflow-y:auto;scroll-snap-type:y mandatory;flex-direction:column}::ng-deep gallery-core[slidingDirection=vertical] gallery-slider .g-slider-content{flex-direction:column;width:100%}::ng-deep gallery-core[slidingDisabled=true] .g-slider{overflow:hidden!important}::ng-deep .g-slider{display:flex;align-items:center;width:100%;transition:var(--g-height-transition);scrollbar-width:none;-ms-overflow-style:none}::ng-deep .g-slider::-webkit-scrollbar{display:none}::ng-deep .g-slider.g-sliding .g-slider-content,::ng-deep .g-slider.g-scrolling .g-slider-content{pointer-events:none}::ng-deep .g-slider gallery-thumb,::ng-deep .g-slider gallery-item{display:flex;flex-direction:column;flex:0 0 auto;scroll-snap-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-user-drag:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}::ng-deep .g-slider gallery-thumb gallery-image[imageState=success],::ng-deep .g-slider gallery-item gallery-image[imageState=success]{align-self:center}::ng-deep gallery-thumbs{max-height:100%;max-width:100%;display:block;z-index:100}::ng-deep gallery-thumbs .g-slider[centralised=true]:before,::ng-deep gallery-thumbs .g-slider[centralised=true]:after{content:\"\"}::ng-deep gallery-thumbs .g-slider[centralised=true]:before{flex:0 0 var(--thumb-centralize-start-size)}::ng-deep gallery-thumbs .g-slider[centralised=true]:after{flex:0 0 var(--thumb-centralize-end-size)}::ng-deep gallery-thumbs .g-slider gallery-thumb{background:black;height:var(--thumb-height);width:var(--thumb-width);max-height:var(--thumb-height);max-width:var(--thumb-width)}::ng-deep gallery-thumbs .g-slider gallery-thumb gallery-image,::ng-deep gallery-thumbs .g-slider gallery-thumb img{width:100%;height:100%}::ng-deep gallery-core[disableThumb=true] gallery-thumb{cursor:default}::ng-deep gallery-core[thumbPosition=top] gallery-thumbs .g-slider,::ng-deep gallery-core[thumbPosition=bottom] gallery-thumbs .g-slider{top:0;overflow-x:auto;flex-direction:row}::ng-deep gallery-core[thumbPosition=top] gallery-thumbs .g-slider-content,::ng-deep gallery-core[thumbPosition=bottom] gallery-thumbs .g-slider-content{flex-direction:row}::ng-deep gallery-core[thumbPosition=top][thumbAutosize=true] gallery-thumb,::ng-deep gallery-core[thumbPosition=bottom][thumbAutosize=true] gallery-thumb{width:initial;max-width:unset}::ng-deep gallery-core[thumbPosition=left] gallery-thumbs .g-slider,::ng-deep gallery-core[thumbPosition=right] gallery-thumbs .g-slider{left:0;overflow-y:auto;flex-direction:column}::ng-deep gallery-core[thumbPosition=left] gallery-thumbs .g-slider-content,::ng-deep gallery-core[thumbPosition=right] gallery-thumbs .g-slider-content{flex-direction:column}::ng-deep gallery-core[thumbPosition=left][thumbAutosize=true] gallery-thumb,::ng-deep gallery-core[thumbPosition=right][thumbAutosize=true] gallery-thumb{height:initial;max-height:unset}::ng-deep gallery-core[thumbSlidingDisabled=true] gallery-thumbs .g-slider{overflow:hidden!important}::ng-deep gallery-core[thumbPosition=top]{flex-direction:column}::ng-deep gallery-core[thumbPosition=left]{flex-direction:row}::ng-deep gallery-core[thumbPosition=right]{flex-direction:row-reverse}::ng-deep gallery-core[thumbPosition=bottom]{flex-direction:column-reverse}::ng-deep gallery-thumb.g-active-thumb .g-thumb-loading{background-color:#464646}::ng-deep .g-thumb-loading{position:relative;overflow:hidden;width:100%;height:100%;background-color:#262626}::ng-deep .g-thumb-loading:before{content:\"\";position:absolute;inset:0 0 0 50%;z-index:1;width:500%;margin-left:-250%;animation:phAnimation .8s linear infinite;background:linear-gradient(to right,rgba(255,255,255,0) 46%,rgba(255,255,255,.35) 50%,rgba(255,255,255,0) 54%) 50% 50%}@keyframes phAnimation{0%{transform:translate3d(-30%,0,0)}to{transform:translate3d(30%,0,0)}}::ng-deep gallery-core[counterPosition=top] .g-counter{top:0;border-bottom-left-radius:4px;border-bottom-right-radius:4px}::ng-deep gallery-core[counterPosition=bottom] .g-counter{bottom:0;border-top-left-radius:4px;border-top-right-radius:4px}::ng-deep .g-counter{font-weight:700;-webkit-user-select:none;-moz-user-select:none;user-select:none;opacity:.6;transition:opacity linear .15s;z-index:50;position:absolute;left:50%;transform:translate(-50%) perspective(1px);font-size:12px;padding:4px 10px;color:var(--g-font-color);background-color:var(--g-overlay-color);box-shadow:var(--g-box-shadow)}::ng-deep .g-counter:hover{opacity:.8}::ng-deep gallery[gallerize] gallery-item{cursor:pointer}::ng-deep gallery-core{gap:1px}::ng-deep gallery-image img{width:100%!important}::ng-deep .gallery-image-error svg,::ng-deep .gallery-thumb-error svg{width:100%;height:100%}::ng-deep .gallery-thumb-error{width:40px;height:40px}::ng-deep .gallery-image-error{width:100px;height:100px}::ng-deep gallery-item,::ng-deep gallery-thumb{position:relative;display:block;overflow:hidden}::ng-deep gallery-item h2,::ng-deep gallery-item h4,::ng-deep gallery-thumb h2,::ng-deep gallery-thumb h4{color:coral;margin:0}::ng-deep gallery-item h2,::ng-deep gallery-thumb h2{font-size:3.5em;margin-bottom:.3em}::ng-deep gallery-item h4,::ng-deep gallery-thumb h4{font-size:1.6em}::ng-deep gallery-item gallery-image,::ng-deep gallery-thumb gallery-image{transition:opacity .3s cubic-bezier(.5,0,.5,1)}::ng-deep gallery-item{--g-item-width: \"auto\";--g-item-height: 100%;height:var(--g-item-height);width:var(--g-item-width);max-height:var(--g-item-height);max-width:100%;z-index:10}::ng-deep gallery-item gallery-image{width:100%;height:100%}::ng-deep gallery-item.g-active-item gallery-image{opacity:1}::ng-deep gallery-item video,::ng-deep gallery-item iframe{position:absolute;width:100%;height:100%}::ng-deep gallery-thumb{align-self:center;cursor:pointer;max-height:100%}::ng-deep gallery-thumb gallery-image{opacity:.5}::ng-deep gallery-thumb.g-active-thumb gallery-image{opacity:1}::ng-deep gallery-image{min-height:100%;display:flex}::ng-deep .g-image-item{pointer-events:none;max-height:100%;max-width:100%}::ng-deep .g-template,::ng-deep .g-image-error-message{position:absolute;z-index:10;inset:0;color:#fff;display:flex;align-items:center;justify-content:center;flex-direction:column}::ng-deep .g-loading{position:absolute;transform:translate3d(-50%,-50%,0);left:50%;top:50%;width:80px;height:80px}::ng-deep gallery-core[imageSize=contain] gallery-item .g-image-item{-o-object-fit:contain;object-fit:contain}::ng-deep gallery-core[imageSize=cover] gallery-item .g-image-item{-o-object-fit:cover;object-fit:cover}::ng-deep gallery-core[thumbImageSize=cover] gallery-thumb .g-image-item{-o-object-fit:cover;object-fit:cover}::ng-deep gallery{position:relative;z-index:1;overflow:hidden;display:flex;justify-content:center;align-items:center;background-color:#000;--g-height-transition: height .4s linear;--g-nav-drop-shadow: drop-shadow(0 0 2px rgba(0, 0, 0, .6));--g-box-shadow: 0 0 3px rgba(0, 0, 0, .6);--g-font-color: #000;--g-overlay-color: #fff}::ng-deep gallery *{box-sizing:border-box}::ng-deep gallery,::ng-deep gallery-core{position:relative;overflow:hidden}::ng-deep gallery-core{max-height:100%;min-height:100%;height:500px}::ng-deep gallery-core,::ng-deep .g-box,::ng-deep .g-slider{display:flex;width:100%;max-height:100%}::ng-deep .g-box,::ng-deep gallery-slider{overflow:hidden;position:relative;display:flex;flex-direction:column;order:1;flex:1}::ng-deep gallery-core[autoHeight=true][thumbPosition=top],::ng-deep gallery-core[autoHeight=true][thumbPosition=bottom]{height:-moz-fit-content!important;height:fit-content!important}::ng-deep gallery-core[autoHeight=true][thumbPosition=top] .g-slider,::ng-deep gallery-core[autoHeight=true][thumbPosition=bottom] .g-slider{height:100%}::ng-deep gallery-core[autoHeight=true][thumbPosition=top] gallery-slider,::ng-deep gallery-core[autoHeight=true][thumbPosition=top] gallery-core,::ng-deep gallery-core[autoHeight=true][thumbPosition=bottom] gallery-slider,::ng-deep gallery-core[autoHeight=true][thumbPosition=bottom] gallery-core{height:100%}::ng-deep gallery-core[autoHeight=true] gallery-item{min-height:100%}::ng-deep gallery-core[autoHeight=true][slidingDirection=horizontal] gallery-item{height:unset;max-height:unset;min-height:unset}::ng-deep gallery-core[autoHeight=true][slidingDirection=horizontal] gallery-item gallery-image{height:100%;width:auto}::ng-deep gallery-core[autoHeight=true][slidingDirection=vertical] gallery-item{height:unset;max-height:unset;min-height:unset}::ng-deep gallery-core[autoHeight=true][slidingDirection=vertical] gallery-item gallery-image{width:100%;height:auto}::ng-deep gallery-core[autoHeight=false][slidingDirection=horizontal] gallery-item,::ng-deep gallery-core[autoHeight=false][slidingDirection=horizontal] .g-slider{height:100%}::ng-deep gallery-core[itemAutoSize=true][slidingDirection=horizontal] gallery-item gallery-image{height:100%;width:auto}::ng-deep gallery-core[itemAutoSize=true][slidingDirection=vertical] gallery-item{height:auto}::ng-deep gallery-core[itemAutoSize=true][slidingDirection=vertical] gallery-item gallery-image{width:100%;height:auto}::ng-deep gallery-core[debug=true] gallery-slider:after,::ng-deep gallery-core[debug=true] gallery-slider:before{position:absolute;content:\"\";background:lime;box-shadow:0 0 5px #0f0;z-index:99999}::ng-deep gallery-core[debug=true] gallery-slider:before{width:100%;height:1px}::ng-deep gallery-core[debug=true] gallery-slider:after{height:100%;width:1px}::ng-deep gallery-core[debug=true] gallery-slider gallery-item{outline:1px solid darkorange}::ng-deep .g-box-template{position:absolute;z-index:10}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.Gallery }]; }, propDecorators: { id: [{
                type: Input
            }], items: [{
                type: Input
            }], nav: [{
                type: Input
            }], dots: [{
                type: Input
            }], loop: [{
                type: Input
            }], debug: [{
                type: Input
            }], thumb: [{
                type: Input
            }], counter: [{
                type: Input
            }], dotsSize: [{
                type: Input
            }], autoPlay: [{
                type: Input
            }], thumbWidth: [{
                type: Input
            }], thumbHeight: [{
                type: Input
            }], disableThumb: [{
                type: Input
            }], scrollBehavior: [{
                type: Input
            }], navScrollBehavior: [{
                type: Input
            }], slidingDisabled: [{
                type: Input
            }], thumbSlidingDisabled: [{
                type: Input
            }], mouseSlidingDisabled: [{
                type: Input
            }], thumbMouseSlidingDisabled: [{
                type: Input
            }], playerInterval: [{
                type: Input
            }], slidingDuration: [{
                type: Input
            }], slidingEase: [{
                type: Input
            }], resizeDebounceTime: [{
                type: Input
            }], imageSize: [{
                type: Input
            }], thumbImageSize: [{
                type: Input
            }], dotsPosition: [{
                type: Input
            }], counterPosition: [{
                type: Input
            }], slidingDirection: [{
                type: Input
            }], loadingAttr: [{
                type: Input
            }], loadingStrategy: [{
                type: Input
            }], thumbPosition: [{
                type: Input
            }], thumbView: [{
                type: Input
            }], thumbDetached: [{
                type: Input
            }], thumbAutosize: [{
                type: Input
            }], itemAutosize: [{
                type: Input
            }], autoHeight: [{
                type: Input
            }], destroyRef: [{
                type: Input
            }], skipInitConfig: [{
                type: Input
            }], itemClick: [{
                type: Output
            }], thumbClick: [{
                type: Output
            }], playingChange: [{
                type: Output
            }], indexChange: [{
                type: Output
            }], itemsChange: [{
                type: Output
            }], error: [{
                type: Output
            }], galleryItemDef: [{
                type: ContentChild,
                args: [GalleryItemDef]
            }], galleryImageDef: [{
                type: ContentChild,
                args: [GalleryImageDef]
            }], galleryThumbDef: [{
                type: ContentChild,
                args: [GalleryThumbDef]
            }], galleryBoxDef: [{
                type: ContentChild,
                args: [GalleryBoxDef]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2FsbGVyeS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9uZy1nYWxsZXJ5L3NyYy9saWIvY29tcG9uZW50cy9nYWxsZXJ5LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQ0wsU0FBUyxFQUNULEtBQUssRUFDTCxNQUFNLEVBQ04sWUFBWSxFQU1aLFlBQVksRUFDWix1QkFBdUIsRUFDeEIsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQy9DLE9BQU8sRUFBRSxZQUFZLEVBQW9CLE1BQU0sTUFBTSxDQUFDO0FBQ3RELE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBT2hFLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSwyQ0FBMkMsQ0FBQztBQUM1RSxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sMkNBQTJDLENBQUM7QUFDNUUsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLDBDQUEwQyxDQUFDO0FBQzFFLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSx5Q0FBeUMsQ0FBQzs7OztBQUV4RSxNQWVhLGdCQUFnQjtJQW1FM0IsWUFBb0IsUUFBaUI7UUFBakIsYUFBUSxHQUFSLFFBQVEsQ0FBUztRQTlENUIsUUFBRyxHQUFZLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQztRQUN4QyxTQUFJLEdBQVksSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDO1FBQzFDLFNBQUksR0FBWSxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUM7UUFDMUMsVUFBSyxHQUFZLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQztRQUM1QyxVQUFLLEdBQVksSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENB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LEtBQUs7Z0JBQ0csWUFBWTtzQkFBcEIsS0FBSztnQkFDRyxlQUFlO3NCQUF2QixLQUFLO2dCQUNHLGdCQUFnQjtzQkFBeEIsS0FBSztnQkFDRyxXQUFXO3NCQUFuQixLQUFLO2dCQUNHLGVBQWU7c0JBQXZCLEtBQUs7Z0JBQ0csYUFBYTtzQkFBckIsS0FBSztnQkFDRyxTQUFTO3NCQUFqQixLQUFLO2dCQUNHLGFBQWE7c0JBQXJCLEtBQUs7Z0JBQ0csYUFBYTtzQkFBckIsS0FBSztnQkFDRyxZQUFZO3NCQUFwQixLQUFLO2dCQUNHLFVBQVU7c0JBQWxCLEtBQUs7Z0JBS0csVUFBVTtzQkFBbEIsS0FBSztnQkFHRyxjQUFjO3NCQUF0QixLQUFLO2dCQUVJLFNBQVM7c0JBQWxCLE1BQU07Z0JBQ0csVUFBVTtzQkFBbkIsTUFBTTtnQkFDRyxhQUFhO3NCQUF0QixNQUFNO2dCQUNHLFdBQVc7c0JBQXBCLE1BQU07Z0JBQ0csV0FBVztzQkFBcEIsTUFBTTtnQkFDRyxLQUFLO3NCQUFkLE1BQU07Z0JBRXVCLGNBQWM7c0JBQTNDLFlBQVk7dUJBQUMsY0FBYztnQkFDRyxlQUFlO3NCQUE3QyxZQUFZO3VCQUFDLGVBQWU7Z0JBQ0UsZUFBZTtzQkFBN0MsWUFBWTt1QkFBQyxlQUFlO2dCQUNBLGFBQWE7c0JBQXpDLFlBQVk7dUJBQUMsYUFBYSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgQ29tcG9uZW50LFxyXG4gIElucHV0LFxyXG4gIE91dHB1dCxcclxuICBDb250ZW50Q2hpbGQsXHJcbiAgT25Jbml0LFxyXG4gIEFmdGVyQ29udGVudEluaXQsXHJcbiAgT25DaGFuZ2VzLFxyXG4gIE9uRGVzdHJveSxcclxuICBTaW1wbGVDaGFuZ2VzLFxyXG4gIEV2ZW50RW1pdHRlcixcclxuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneVxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xyXG5pbXBvcnQgeyBTdWJzY3JpcHRpb24sIFN1YnNjcmlwdGlvbkxpa2UgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgR2FsbGVyeUNvcmVDb21wb25lbnQgfSBmcm9tICcuL2dhbGxlcnktY29yZS5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBHYWxsZXJ5IH0gZnJvbSAnLi4vc2VydmljZXMvZ2FsbGVyeS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgR2FsbGVyeVJlZiB9IGZyb20gJy4uL3NlcnZpY2VzL2dhbGxlcnktcmVmJztcclxuaW1wb3J0IHsgR2FsbGVyeUVycm9yLCBHYWxsZXJ5SXRlbSwgR2FsbGVyeVN0YXRlIH0gZnJvbSAnLi4vbW9kZWxzL2dhbGxlcnkubW9kZWwnO1xyXG5pbXBvcnQgeyBJZnJhbWVJdGVtRGF0YSwgSW1hZ2VJdGVtRGF0YSwgVmlkZW9JdGVtRGF0YSwgWW91dHViZUl0ZW1EYXRhIH0gZnJvbSAnLi90ZW1wbGF0ZXMvaXRlbXMubW9kZWwnO1xyXG5pbXBvcnQgeyBHYWxsZXJ5Q29uZmlnIH0gZnJvbSAnLi4vbW9kZWxzL2NvbmZpZy5tb2RlbCc7XHJcbmltcG9ydCB7IEJlemllckVhc2luZ09wdGlvbnMgfSBmcm9tICcuLi9zbW9vdGgtc2Nyb2xsJztcclxuaW1wb3J0IHsgR2FsbGVyeUltYWdlRGVmIH0gZnJvbSAnLi4vZGlyZWN0aXZlcy9nYWxsZXJ5LWltYWdlLWRlZi5kaXJlY3RpdmUnO1xyXG5pbXBvcnQgeyBHYWxsZXJ5VGh1bWJEZWYgfSBmcm9tICcuLi9kaXJlY3RpdmVzL2dhbGxlcnktdGh1bWItZGVmLmRpcmVjdGl2ZSc7XHJcbmltcG9ydCB7IEdhbGxlcnlJdGVtRGVmIH0gZnJvbSAnLi4vZGlyZWN0aXZlcy9nYWxsZXJ5LWl0ZW0tZGVmLmRpcmVjdGl2ZSc7XHJcbmltcG9ydCB7IEdhbGxlcnlCb3hEZWYgfSBmcm9tICcuLi9kaXJlY3RpdmVzL2dhbGxlcnktYm94LWRlZi5kaXJlY3RpdmUnO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdnYWxsZXJ5JyxcclxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcclxuICBzdHlsZVVybHM6IFsnLi4vc3R5bGVzL2dhbGxlcnkuc2NzcyddLFxyXG4gIHRlbXBsYXRlOiBgXHJcbiAgICA8Z2FsbGVyeS1jb3JlIFtnYWxsZXJ5SWRdPVwiaWRcIlxyXG4gICAgICAgICAgICAgICAgICBbc3RhdGVdPVwiZ2FsbGVyeVJlZi5zdGF0ZSB8IGFzeW5jXCJcclxuICAgICAgICAgICAgICAgICAgW2NvbmZpZ109XCJnYWxsZXJ5UmVmLmNvbmZpZyB8IGFzeW5jXCJcclxuICAgICAgICAgICAgICAgICAgKGl0ZW1DbGljayk9XCJvbkl0ZW1DbGljaygkZXZlbnQpXCJcclxuICAgICAgICAgICAgICAgICAgKHRodW1iQ2xpY2spPVwib25UaHVtYkNsaWNrKCRldmVudClcIlxyXG4gICAgICAgICAgICAgICAgICAoZXJyb3IpPVwib25FcnJvcigkZXZlbnQpXCI+PC9nYWxsZXJ5LWNvcmU+XHJcbiAgYCxcclxuICBzdGFuZGFsb25lOiB0cnVlLFxyXG4gIGltcG9ydHM6IFtDb21tb25Nb2R1bGUsIEdhbGxlcnlDb3JlQ29tcG9uZW50XVxyXG59KVxyXG5leHBvcnQgY2xhc3MgR2FsbGVyeUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJDb250ZW50SW5pdCwgT25DaGFuZ2VzLCBPbkRlc3Ryb3kge1xyXG5cclxuICBnYWxsZXJ5UmVmOiBHYWxsZXJ5UmVmO1xyXG4gIEBJbnB1dCgpIGlkOiBzdHJpbmc7XHJcbiAgQElucHV0KCkgaXRlbXM6IEdhbGxlcnlJdGVtIFtdO1xyXG4gIEBJbnB1dCgpIG5hdjogYm9vbGVhbiA9IHRoaXMuX2dhbGxlcnkuY29uZmlnLm5hdjtcclxuICBASW5wdXQoKSBkb3RzOiBib29sZWFuID0gdGhpcy5fZ2FsbGVyeS5jb25maWcuZG90cztcclxuICBASW5wdXQoKSBsb29wOiBib29sZWFuID0gdGhpcy5fZ2FsbGVyeS5jb25maWcubG9vcDtcclxuICBASW5wdXQoKSBkZWJ1ZzogYm9vbGVhbiA9IHRoaXMuX2dhbGxlcnkuY29uZmlnLmRlYnVnO1xyXG4gIEBJbnB1dCgpIHRodW1iOiBib29sZWFuID0gdGhpcy5fZ2FsbGVyeS5jb25maWcudGh1bWI7XHJcbiAgQElucHV0KCkgY291bnRlcjogYm9vbGVhbiA9IHRoaXMuX2dhbGxlcnkuY29uZmlnLmNvdW50ZXI7XHJcbiAgQElucHV0KCkgZG90c1NpemU6IG51bWJlciA9IHRoaXMuX2dhbGxlcnkuY29uZmlnLmRvdHNTaXplO1xyXG4gIEBJbnB1dCgpIGF1dG9QbGF5OiBib29sZWFuID0gdGhpcy5fZ2FsbGVyeS5jb25maWcuYXV0b1BsYXk7XHJcbiAgQElucHV0KCkgdGh1bWJXaWR0aDogbnVtYmVyID0gdGhpcy5fZ2FsbGVyeS5jb25maWcudGh1bWJXaWR0aDtcclxuICBASW5wdXQoKSB0aHVtYkhlaWdodDogbnVtYmVyID0gdGhpcy5fZ2FsbGVyeS5jb25maWcudGh1bWJIZWlnaHQ7XHJcbiAgQElucHV0KCkgZGlzYWJsZVRodW1iOiBib29sZWFuID0gdGhpcy5fZ2FsbGVyeS5jb25maWcuZGlzYWJsZVRodW1iO1xyXG4gIEBJbnB1dCgpIHNjcm9sbEJlaGF2aW9yOiBTY3JvbGxCZWhhdmlvciA9IHRoaXMuX2dhbGxlcnkuY29uZmlnLnNjcm9sbEJlaGF2aW9yO1xyXG4gIEBJbnB1dCgpIG5hdlNjcm9sbEJlaGF2aW9yOiBTY3JvbGxCZWhhdmlvciA9IHRoaXMuX2dhbGxlcnkuY29uZmlnLm5hdlNjcm9sbEJlaGF2aW9yO1xyXG4gIEBJbnB1dCgpIHNsaWRpbmdEaXNhYmxlZDogYm9vbGVhbiA9IHRoaXMuX2dhbGxlcnkuY29uZmlnLnNsaWRpbmdEaXNhYmxlZDtcclxuICBASW5wdXQoKSB0aHVtYlNsaWRpbmdEaXNhYmxlZDogYm9vbGVhbiA9IHRoaXMuX2dhbGxlcnkuY29uZmlnLnRodW1iU2xpZGluZ0Rpc2FibGVkO1xyXG4gIEBJbnB1dCgpIG1vdXNlU2xpZGluZ0Rpc2FibGVkOiBib29sZWFuID0gdGhpcy5fZ2FsbGVyeS5jb25maWcubW91c2VTbGlkaW5nRGlzYWJsZWQ7XHJcbiAgQElucHV0KCkgdGh1bWJNb3VzZVNsaWRpbmdEaXNhYmxlZDogYm9vbGVhbiA9IHRoaXMuX2dhbGxlcnkuY29uZmlnLnRodW1iTW91c2VTbGlkaW5nRGlzYWJsZWQ7XHJcbiAgQElucHV0KCkgcGxheWVySW50ZXJ2YWw6IG51bWJlciA9IHRoaXMuX2dhbGxlcnkuY29uZmlnLnBsYXllckludGVydmFsO1xyXG4gIEBJbnB1dCgpIHNsaWRpbmdEdXJhdGlvbjogbnVtYmVyID0gdGhpcy5fZ2FsbGVyeS5jb25maWcuc2xpZGluZ0R1cmF0aW9uO1xyXG4gIEBJbnB1dCgpIHNsaWRpbmdFYXNlOiBCZXppZXJFYXNpbmdPcHRpb25zID0gdGhpcy5fZ2FsbGVyeS5jb25maWcuc2xpZGluZ0Vhc2U7XHJcbiAgQElucHV0KCkgcmVzaXplRGVib3VuY2VUaW1lOiBudW1iZXIgPSB0aGlzLl9nYWxsZXJ5LmNvbmZpZy5yZXNpemVEZWJvdW5jZVRpbWU7XHJcbiAgQElucHV0KCkgaW1hZ2VTaXplOiAnY292ZXInIHwgJ2NvbnRhaW4nID0gdGhpcy5fZ2FsbGVyeS5jb25maWcuaW1hZ2VTaXplO1xyXG4gIEBJbnB1dCgpIHRodW1iSW1hZ2VTaXplOiAnY292ZXInIHwgJ2NvbnRhaW4nID0gdGhpcy5fZ2FsbGVyeS5jb25maWcudGh1bWJJbWFnZVNpemU7XHJcbiAgQElucHV0KCkgZG90c1Bvc2l0aW9uOiAndG9wJyB8ICdib3R0b20nID0gdGhpcy5fZ2FsbGVyeS5jb25maWcuZG90c1Bvc2l0aW9uO1xyXG4gIEBJbnB1dCgpIGNvdW50ZXJQb3NpdGlvbjogJ3RvcCcgfCAnYm90dG9tJyA9IHRoaXMuX2dhbGxlcnkuY29uZmlnLmNvdW50ZXJQb3NpdGlvbjtcclxuICBASW5wdXQoKSBzbGlkaW5nRGlyZWN0aW9uOiAnaG9yaXpvbnRhbCcgfCAndmVydGljYWwnID0gdGhpcy5fZ2FsbGVyeS5jb25maWcuc2xpZGluZ0RpcmVjdGlvbjtcclxuICBASW5wdXQoKSBsb2FkaW5nQXR0cjogJ2VhZ2VyJyB8ICdsYXp5JyA9IHRoaXMuX2dhbGxlcnkuY29uZmlnLmxvYWRpbmdBdHRyO1xyXG4gIEBJbnB1dCgpIGxvYWRpbmdTdHJhdGVneTogJ3ByZWxvYWQnIHwgJ2xhenknIHwgJ2RlZmF1bHQnID0gdGhpcy5fZ2FsbGVyeS5jb25maWcubG9hZGluZ1N0cmF0ZWd5O1xyXG4gIEBJbnB1dCgpIHRodW1iUG9zaXRpb246ICd0b3AnIHwgJ2xlZnQnIHwgJ3JpZ2h0JyB8ICdib3R0b20nID0gdGhpcy5fZ2FsbGVyeS5jb25maWcudGh1bWJQb3NpdGlvbjtcclxuICBASW5wdXQoKSB0aHVtYlZpZXc6ICdkZWZhdWx0JyB8ICdjb250YWluJyA9IHRoaXMuX2dhbGxlcnkuY29uZmlnLnRodW1iVmlldztcclxuICBASW5wdXQoKSB0aHVtYkRldGFjaGVkOiBib29sZWFuID0gdGhpcy5fZ2FsbGVyeS5jb25maWcudGh1bWJEZXRhY2hlZDtcclxuICBASW5wdXQoKSB0aHVtYkF1dG9zaXplOiBib29sZWFuID0gdGhpcy5fZ2FsbGVyeS5jb25maWcudGh1bWJBdXRvc2l6ZTtcclxuICBASW5wdXQoKSBpdGVtQXV0b3NpemU6IGJvb2xlYW4gPSB0aGlzLl9nYWxsZXJ5LmNvbmZpZy5pdGVtQXV0b3NpemU7XHJcbiAgQElucHV0KCkgYXV0b0hlaWdodDogYm9vbGVhbiA9IHRoaXMuX2dhbGxlcnkuY29uZmlnLmF1dG9IZWlnaHQ7XHJcblxyXG4gIC8vIElucHV0cyB1c2VkIGJ5IHRoZSBsaWdodGJveFxyXG5cclxuICAvKiogRGVzdHJveSBnYWxsZXJ5IHJlZiBvbiBjb21wb25lbnQgZGVzdHJveSBldmVudCAqL1xyXG4gIEBJbnB1dCgpIGRlc3Ryb3lSZWYgPSB0cnVlO1xyXG5cclxuICAvKiogU2tpcCBpbml0aWFsaXppbmcgdGhlIGNvbmZpZyB3aXRoIGNvbXBvbmVudHMgaW5wdXRzIChMaWdodGJveCBtb2RlKSAqL1xyXG4gIEBJbnB1dCgpIHNraXBJbml0Q29uZmlnID0gZmFsc2U7XHJcblxyXG4gIEBPdXRwdXQoKSBpdGVtQ2xpY2sgPSBuZXcgRXZlbnRFbWl0dGVyPG51bWJlcj4oKTtcclxuICBAT3V0cHV0KCkgdGh1bWJDbGljayA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyPigpO1xyXG4gIEBPdXRwdXQoKSBwbGF5aW5nQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxHYWxsZXJ5U3RhdGU+KCk7XHJcbiAgQE91dHB1dCgpIGluZGV4Q2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxHYWxsZXJ5U3RhdGU+KCk7XHJcbiAgQE91dHB1dCgpIGl0ZW1zQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxHYWxsZXJ5U3RhdGU+KCk7XHJcbiAgQE91dHB1dCgpIGVycm9yID0gbmV3IEV2ZW50RW1pdHRlcjxHYWxsZXJ5RXJyb3I+KCk7XHJcblxyXG4gIEBDb250ZW50Q2hpbGQoR2FsbGVyeUl0ZW1EZWYpIGdhbGxlcnlJdGVtRGVmOiBHYWxsZXJ5SXRlbURlZjtcclxuICBAQ29udGVudENoaWxkKEdhbGxlcnlJbWFnZURlZikgZ2FsbGVyeUltYWdlRGVmOiBHYWxsZXJ5SW1hZ2VEZWY7XHJcbiAgQENvbnRlbnRDaGlsZChHYWxsZXJ5VGh1bWJEZWYpIGdhbGxlcnlUaHVtYkRlZjogR2FsbGVyeVRodW1iRGVmO1xyXG4gIEBDb250ZW50Q2hpbGQoR2FsbGVyeUJveERlZikgZ2FsbGVyeUJveERlZjogR2FsbGVyeUJveERlZjtcclxuXHJcbiAgcHJpdmF0ZSBfaXRlbUNsaWNrJDogU3Vic2NyaXB0aW9uTGlrZSA9IFN1YnNjcmlwdGlvbi5FTVBUWTtcclxuICBwcml2YXRlIF90aHVtYkNsaWNrJDogU3Vic2NyaXB0aW9uTGlrZSA9IFN1YnNjcmlwdGlvbi5FTVBUWTtcclxuICBwcml2YXRlIF9pdGVtQ2hhbmdlJDogU3Vic2NyaXB0aW9uTGlrZSA9IFN1YnNjcmlwdGlvbi5FTVBUWTtcclxuICBwcml2YXRlIF9pbmRleENoYW5nZSQ6IFN1YnNjcmlwdGlvbkxpa2UgPSBTdWJzY3JpcHRpb24uRU1QVFk7XHJcbiAgcHJpdmF0ZSBfcGxheWluZ0NoYW5nZSQ6IFN1YnNjcmlwdGlvbkxpa2UgPSBTdWJzY3JpcHRpb24uRU1QVFk7XHJcbiAgcHJpdmF0ZSBfcGxheWVyTGlzdGVuZXIkOiBTdWJzY3JpcHRpb25MaWtlID0gU3Vic2NyaXB0aW9uLkVNUFRZO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9nYWxsZXJ5OiBHYWxsZXJ5KSB7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldENvbmZpZygpOiBHYWxsZXJ5Q29uZmlnIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hdjogdGhpcy5uYXYsXHJcbiAgICAgIGRvdHM6IHRoaXMuZG90cyxcclxuICAgICAgbG9vcDogdGhpcy5sb29wLFxyXG4gICAgICBkZWJ1ZzogdGhpcy5kZWJ1ZyxcclxuICAgICAgdGh1bWI6IHRoaXMudGh1bWIsXHJcbiAgICAgIGNvdW50ZXI6IHRoaXMuY291bnRlcixcclxuICAgICAgYXV0b1BsYXk6IHRoaXMuYXV0b1BsYXksXHJcbiAgICAgIGRvdHNTaXplOiB0aGlzLmRvdHNTaXplLFxyXG4gICAgICBpbWFnZVNpemU6IHRoaXMuaW1hZ2VTaXplLFxyXG4gICAgICB0aHVtYkltYWdlU2l6ZTogdGhpcy50aHVtYkltYWdlU2l6ZSxcclxuICAgICAgc2Nyb2xsQmVoYXZpb3I6IHRoaXMuc2Nyb2xsQmVoYXZpb3IsXHJcbiAgICAgIG5hdlNjcm9sbEJlaGF2aW9yOiB0aGlzLm5hdlNjcm9sbEJlaGF2aW9yLFxyXG4gICAgICB0aHVtYlZpZXc6IHRoaXMudGh1bWJWaWV3LFxyXG4gICAgICB0aHVtYldpZHRoOiB0aGlzLnRodW1iV2lkdGgsXHJcbiAgICAgIHRodW1iSGVpZ2h0OiB0aGlzLnRodW1iSGVpZ2h0LFxyXG4gICAgICBzbGlkaW5nRWFzZTogdGhpcy5zbGlkaW5nRWFzZSxcclxuICAgICAgZGlzYWJsZVRodW1iOiB0aGlzLmRpc2FibGVUaHVtYixcclxuICAgICAgZG90c1Bvc2l0aW9uOiB0aGlzLmRvdHNQb3NpdGlvbixcclxuICAgICAgbG9hZGluZ0F0dHI6IHRoaXMubG9hZGluZ0F0dHIsXHJcbiAgICAgIHRodW1iRGV0YWNoZWQ6IHRoaXMudGh1bWJEZXRhY2hlZCxcclxuICAgICAgdGh1bWJQb3NpdGlvbjogdGhpcy50aHVtYlBvc2l0aW9uLFxyXG4gICAgICBwbGF5ZXJJbnRlcnZhbDogdGhpcy5wbGF5ZXJJbnRlcnZhbCxcclxuICAgICAgY291bnRlclBvc2l0aW9uOiB0aGlzLmNvdW50ZXJQb3NpdGlvbixcclxuICAgICAgbG9hZGluZ1N0cmF0ZWd5OiB0aGlzLmxvYWRpbmdTdHJhdGVneSxcclxuICAgICAgc2xpZGluZ0R1cmF0aW9uOiB0aGlzLnNsaWRpbmdEdXJhdGlvbixcclxuICAgICAgc2xpZGluZ0RpcmVjdGlvbjogdGhpcy5zbGlkaW5nRGlyZWN0aW9uLFxyXG4gICAgICByZXNpemVEZWJvdW5jZVRpbWU6IHRoaXMucmVzaXplRGVib3VuY2VUaW1lLFxyXG4gICAgICBzbGlkaW5nRGlzYWJsZWQ6IHRoaXMuc2xpZGluZ0Rpc2FibGVkLFxyXG4gICAgICB0aHVtYlNsaWRpbmdEaXNhYmxlZDogdGhpcy50aHVtYlNsaWRpbmdEaXNhYmxlZCxcclxuICAgICAgbW91c2VTbGlkaW5nRGlzYWJsZWQ6IHRoaXMubW91c2VTbGlkaW5nRGlzYWJsZWQsXHJcbiAgICAgIHRodW1iTW91c2VTbGlkaW5nRGlzYWJsZWQ6IHRoaXMudGh1bWJNb3VzZVNsaWRpbmdEaXNhYmxlZCxcclxuICAgICAgdGh1bWJBdXRvc2l6ZTogdGhpcy50aHVtYkF1dG9zaXplLFxyXG4gICAgICBpdGVtQXV0b3NpemU6IHRoaXMuaXRlbUF1dG9zaXplLFxyXG4gICAgICBhdXRvSGVpZ2h0OiB0aGlzLmF1dG9IZWlnaHQsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuZ2FsbGVyeVJlZikge1xyXG4gICAgICB0aGlzLmdhbGxlcnlSZWYuc2V0Q29uZmlnKHRoaXMuZ2V0Q29uZmlnKCkpO1xyXG5cclxuICAgICAgaWYgKGNoYW5nZXMuaXRlbXMgJiYgY2hhbmdlcy5pdGVtcy5jdXJyZW50VmFsdWUgIT09IGNoYW5nZXMuaXRlbXMucHJldmlvdXNWYWx1ZSkge1xyXG4gICAgICAgIHRoaXMubG9hZCh0aGlzLml0ZW1zKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKTogdm9pZCB7XHJcbiAgICAvLyBHZXQgZ2FsbGVyeSBpbnN0YW5jZSBieSBpZFxyXG4gICAgaWYgKHRoaXMuc2tpcEluaXRDb25maWcpIHtcclxuICAgICAgdGhpcy5nYWxsZXJ5UmVmID0gdGhpcy5fZ2FsbGVyeS5yZWYodGhpcy5pZCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmdhbGxlcnlSZWYgPSB0aGlzLl9nYWxsZXJ5LnJlZih0aGlzLmlkLCB0aGlzLmdldENvbmZpZygpKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBMb2FkIGdhbGxlcnkgaXRlbXNcclxuICAgIHRoaXMubG9hZCh0aGlzLml0ZW1zKTtcclxuXHJcbiAgICAvLyBBY3RpdmF0ZSBwbGF5ZXIgbGlzdGVuZXJcclxuICAgIHRoaXMuX3BsYXllckxpc3RlbmVyJCA9IHRoaXMuZ2FsbGVyeVJlZi5hY3RpdmF0ZVBsYXllcigpLnN1YnNjcmliZSgpO1xyXG5cclxuICAgIC8vIFN1YnNjcmliZXMgdG8gZXZlbnRzIG9uIGRlbWFuZFxyXG4gICAgaWYgKHRoaXMuaW5kZXhDaGFuZ2Uub2JzZXJ2ZWQpIHtcclxuICAgICAgdGhpcy5faW5kZXhDaGFuZ2UkID0gdGhpcy5nYWxsZXJ5UmVmLmluZGV4Q2hhbmdlZC5zdWJzY3JpYmUoKHN0YXRlOiBHYWxsZXJ5U3RhdGUpID0+IHRoaXMuaW5kZXhDaGFuZ2UuZW1pdChzdGF0ZSkpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuaXRlbXNDaGFuZ2Uub2JzZXJ2ZWQpIHtcclxuICAgICAgdGhpcy5faXRlbUNoYW5nZSQgPSB0aGlzLmdhbGxlcnlSZWYuaXRlbXNDaGFuZ2VkLnN1YnNjcmliZSgoc3RhdGU6IEdhbGxlcnlTdGF0ZSkgPT4gdGhpcy5pdGVtc0NoYW5nZS5lbWl0KHN0YXRlKSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5wbGF5aW5nQ2hhbmdlLm9ic2VydmVkKSB7XHJcbiAgICAgIHRoaXMuX3BsYXlpbmdDaGFuZ2UkID0gdGhpcy5nYWxsZXJ5UmVmLnBsYXlpbmdDaGFuZ2VkLnN1YnNjcmliZSgoc3RhdGU6IEdhbGxlcnlTdGF0ZSkgPT4gdGhpcy5wbGF5aW5nQ2hhbmdlLmVtaXQoc3RhdGUpKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTdGFydCBwbGF5aW5nIGlmIGF1dG9wbGF5IGlzIHNldCB0byB0cnVlXHJcbiAgICBpZiAodGhpcy5hdXRvUGxheSkge1xyXG4gICAgICB0aGlzLnBsYXkoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG5nQWZ0ZXJDb250ZW50SW5pdCgpOiB2b2lkIHtcclxuICAgIGNvbnN0IHRlbXBsYXRlQ29uZmlnOiBHYWxsZXJ5Q29uZmlnID0ge307XHJcbiAgICBpZiAodGhpcy5nYWxsZXJ5SXRlbURlZikge1xyXG4gICAgICB0ZW1wbGF0ZUNvbmZpZy5pdGVtVGVtcGxhdGUgPSB0aGlzLmdhbGxlcnlJdGVtRGVmLnRlbXBsYXRlUmVmO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZ2FsbGVyeUltYWdlRGVmKSB7XHJcbiAgICAgIHRlbXBsYXRlQ29uZmlnLmltYWdlVGVtcGxhdGUgPSB0aGlzLmdhbGxlcnlJbWFnZURlZi50ZW1wbGF0ZVJlZjtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmdhbGxlcnlUaHVtYkRlZikge1xyXG4gICAgICB0ZW1wbGF0ZUNvbmZpZy50aHVtYlRlbXBsYXRlID0gdGhpcy5nYWxsZXJ5VGh1bWJEZWYudGVtcGxhdGVSZWY7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5nYWxsZXJ5Qm94RGVmKSB7XHJcbiAgICAgIHRlbXBsYXRlQ29uZmlnLmJveFRlbXBsYXRlID0gdGhpcy5nYWxsZXJ5Qm94RGVmLnRlbXBsYXRlUmVmO1xyXG4gICAgfVxyXG4gICAgaWYgKE9iamVjdC5rZXlzKHRlbXBsYXRlQ29uZmlnKS5sZW5ndGgpIHtcclxuICAgICAgdGhpcy5nYWxsZXJ5UmVmLnNldENvbmZpZyh0ZW1wbGF0ZUNvbmZpZyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcclxuICAgIHRoaXMuX2l0ZW1DbGljayQudW5zdWJzY3JpYmUoKTtcclxuICAgIHRoaXMuX3RodW1iQ2xpY2skLnVuc3Vic2NyaWJlKCk7XHJcbiAgICB0aGlzLl9pdGVtQ2hhbmdlJC51bnN1YnNjcmliZSgpO1xyXG4gICAgdGhpcy5faW5kZXhDaGFuZ2UkLnVuc3Vic2NyaWJlKCk7XHJcbiAgICB0aGlzLl9wbGF5aW5nQ2hhbmdlJC51bnN1YnNjcmliZSgpO1xyXG4gICAgdGhpcy5fcGxheWVyTGlzdGVuZXIkLnVuc3Vic2NyaWJlKCk7XHJcbiAgICBpZiAodGhpcy5kZXN0cm95UmVmKSB7XHJcbiAgICAgIHRoaXMuZ2FsbGVyeVJlZi5kZXN0cm95KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbkl0ZW1DbGljayhpOiBudW1iZXIpOiB2b2lkIHtcclxuICAgIHRoaXMuaXRlbUNsaWNrLmVtaXQoaSk7XHJcbiAgICB0aGlzLmdhbGxlcnlSZWYuaXRlbUNsaWNrLm5leHQoaSk7XHJcbiAgfVxyXG5cclxuICBvblRodW1iQ2xpY2soaTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICB0aGlzLmdhbGxlcnlSZWYuc2V0KGkpO1xyXG4gICAgdGhpcy50aHVtYkNsaWNrLmVtaXQoaSk7XHJcbiAgICB0aGlzLmdhbGxlcnlSZWYudGh1bWJDbGljay5uZXh0KGkpO1xyXG4gIH1cclxuXHJcbiAgb25FcnJvcihlcnI6IEdhbGxlcnlFcnJvcik6IHZvaWQge1xyXG4gICAgdGhpcy5lcnJvci5lbWl0KGVycik7XHJcbiAgICB0aGlzLmdhbGxlcnlSZWYuZXJyb3IubmV4dChlcnIpO1xyXG4gIH1cclxuXHJcbiAgbG9hZChpdGVtczogR2FsbGVyeUl0ZW1bXSk6IHZvaWQge1xyXG4gICAgdGhpcy5nYWxsZXJ5UmVmLmxvYWQoaXRlbXMpO1xyXG4gIH1cclxuXHJcbiAgYWRkKGl0ZW06IEdhbGxlcnlJdGVtLCBhY3RpdmU/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICB0aGlzLmdhbGxlcnlSZWYuYWRkKGl0ZW0sIGFjdGl2ZSk7XHJcbiAgfVxyXG5cclxuICBhZGRJbWFnZShkYXRhOiBJbWFnZUl0ZW1EYXRhLCBhY3RpdmU/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICB0aGlzLmdhbGxlcnlSZWYuYWRkSW1hZ2UoZGF0YSwgYWN0aXZlKTtcclxuICB9XHJcblxyXG4gIGFkZFZpZGVvKGRhdGE6IFZpZGVvSXRlbURhdGEsIGFjdGl2ZT86IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgIHRoaXMuZ2FsbGVyeVJlZi5hZGRWaWRlbyhkYXRhLCBhY3RpdmUpO1xyXG4gIH1cclxuXHJcbiAgYWRkSWZyYW1lKGRhdGE6IElmcmFtZUl0ZW1EYXRhLCBhY3RpdmU/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICB0aGlzLmdhbGxlcnlSZWYuYWRkSWZyYW1lKGRhdGEsIGFjdGl2ZSk7XHJcbiAgfVxyXG5cclxuICBhZGRZb3V0dWJlKGRhdGE6IFlvdXR1YmVJdGVtRGF0YSwgYWN0aXZlPzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgdGhpcy5nYWxsZXJ5UmVmLmFkZFlvdXR1YmUoZGF0YSwgYWN0aXZlKTtcclxuICB9XHJcblxyXG4gIHJlbW92ZShpOiBudW1iZXIpOiB2b2lkIHtcclxuICAgIHRoaXMuZ2FsbGVyeVJlZi5yZW1vdmUoaSk7XHJcbiAgfVxyXG5cclxuICBuZXh0KGJlaGF2aW9yPzogU2Nyb2xsQmVoYXZpb3IsIGxvb3A/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICB0aGlzLmdhbGxlcnlSZWYubmV4dChiZWhhdmlvciwgbG9vcCk7XHJcbiAgfVxyXG5cclxuICBwcmV2KGJlaGF2aW9yPzogU2Nyb2xsQmVoYXZpb3IsIGxvb3A/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICB0aGlzLmdhbGxlcnlSZWYucHJldihiZWhhdmlvciwgbG9vcCk7XHJcbiAgfVxyXG5cclxuICBzZXQoaTogbnVtYmVyLCBiZWhhdmlvcj86IFNjcm9sbEJlaGF2aW9yKTogdm9pZCB7XHJcbiAgICB0aGlzLmdhbGxlcnlSZWYuc2V0KGksIGJlaGF2aW9yKTtcclxuICB9XHJcblxyXG4gIHJlc2V0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5nYWxsZXJ5UmVmLnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICBwbGF5KGludGVydmFsPzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICB0aGlzLmdhbGxlcnlSZWYucGxheShpbnRlcnZhbCk7XHJcbiAgfVxyXG5cclxuICBzdG9wKCk6IHZvaWQge1xyXG4gICAgdGhpcy5nYWxsZXJ5UmVmLnN0b3AoKTtcclxuICB9XHJcbn1cclxuIl19